{% extends "base.html" %}

{% block title %}Blog Posts{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h2>Latest Blogs</h2>
    {% if current_user.is_authenticated %}
        <a href="{{ url_for('create_post') }}" class="btn btn-primary">
            + New Post
        </a>
    {% endif %}
</div>

<div class="row gy-4 gy-md-5 gx-xl-6">

  {% for post in posts %}
  <div class="col-12 col-lg-4">
    <article>
      <div class="card border-0 bg-transparent">

        <figure class="card-img-top mb-4 overflow-hidden bsb-overlay-hover">
          <a href="{{ url_for('single_post', slug=post.slug) }}">
            <img class="img-fluid"
                 src="{{ post.media[0].file_url if post.media else url_for('static', filename='img/default.jpg') }}"
                 alt="{{ post.title }}">
          </a>
        </figure>

        <div class="card-body p-0">
          <div class="entry-header mb-3">

            {% if post.category %}
            <a class="badge bg-primary-subtle text-primary">
              {{ post.category.name }}
            </a>
            {% endif %}

            <h2 class="h5 mt-2">
              <a class="text-dark text-decoration-none"
                 href="{{ url_for('single_post', slug=post.slug) }}">
                {{ post.title }}
              </a>
            </h2>

          </div>
        </div>

        <div class="card-footer bg-transparent border-0 p-0">
          <small class="text-muted">
            {{ post.created_at.strftime('%d %b %Y') }}
          </small>
        </div>

      </div>
    </article>
  </div>
  {% endfor %}

</div>


{% endblock %}


